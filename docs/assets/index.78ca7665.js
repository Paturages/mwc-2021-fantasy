import{S as e,i as t,s as n,e as r,a as o,d as l,b as s,t as i,c as a,f as c,g as u,h as p,l as f,j as d,n as v,r as y,k as m}from"./vendor.751a0643.js";!function(){const e=document.createElement("link").relList;if(!(e&&e.supports&&e.supports("modulepreload"))){for(const e of document.querySelectorAll('link[rel="modulepreload"]'))t(e);new MutationObserver((e=>{for(const n of e)if("childList"===n.type)for(const e of n.addedNodes)"LINK"===e.tagName&&"modulepreload"===e.rel&&t(e)})).observe(document,{childList:!0,subtree:!0})}function t(e){if(e.ep)return;e.ep=!0;const t=function(e){const t={};return e.integrity&&(t.integrity=e.integrity),e.referrerpolicy&&(t.referrerPolicy=e.referrerpolicy),"use-credentials"===e.crossorigin?t.credentials="include":"anonymous"===e.crossorigin?t.credentials="omit":t.credentials="same-origin",t}(e);fetch(e.href,t)}}();function h(e){let t;return{c(){t=r("b"),t.textContent="Optimization failed, results are broken :/"},m(e,n){o(e,t,n)},d(e){e&&l(t)}}}function g(e){let t,n,m,g,_,b,O,C,x,z,S,k,N,j,q,E,L,M,I,J,T,$,w,A,F,P,R,U,W,B,G,H,K,Q,V,D,X,Y,Z,ee,te,ne,re,oe,le,se,ie,ae,ce,ue=JSON.stringify(e[0],null,2)+"",pe=e[1].map(e[10]).join("\n")+"",fe=e[2].toUpperCase()+"",de=e[5](e[1],"price")+"",ve=e[5](e[1].slice(0,6),e[2])+"",ye=e[5](e[1],e[2])+"",me=e[4]&&h();return{c(){t=r("main"),n=r("div"),m=r("h1"),m.textContent="fantasy thing",g=s(),_=r("p"),_.innerHTML="6 players + 2 subs<br/>\n      Max cost: 80<br/>\n      Only one player per country<br/>\n      Only one &quot;super player&quot; (14 or 13.5)",b=s(),O=r("textarea"),C=s(),x=r("br"),z=s(),S=r("select"),k=r("option"),k.textContent="Optimize total points",N=r("option"),N.textContent="Optimize RO32 points",j=r("option"),j.textContent="Optimize RO16 points",q=r("option"),q.textContent="Optimize Quarterfinals points",E=r("option"),E.textContent="Optimize Semifinals points",L=r("option"),L.textContent="Optimize Finals/GF points",M=s(),I=r("br"),J=s(),T=r("select"),$=r("option"),$.textContent="Optimize for top 6 (filler subs)",w=r("option"),w.textContent="Optimize for all 8",A=s(),F=r("pre"),P=i("Players: "),R=i(ue),U=s(),W=r("div"),B=r("pre"),G=i(pe),H=s(),me&&me.c(),K=i("\n    Optimization target: "),Q=r("b"),V=i(fe),D=r("br"),X=i("\n    Cost sum: "),Y=r("b"),Z=i(de),ee=r("br"),te=i("\n    Top 6 points (w/o bench): "),ne=r("b"),re=i(ve),oe=r("br"),le=i("\n    Total points: "),se=r("b"),ie=i(ye),a(m,"class","svelte-100dra1"),a(_,"class","svelte-100dra1"),a(O,"placeholder","Ctrl+A, Ctrl+C from 'MWC players' sheet, Ctrl+V here. Make sure that *everything* is selected on the sheet (all columns, even 'A')"),a(O,"class","svelte-100dra1"),k.__value="total",k.value=k.__value,N.__value="ro32",N.value=N.__value,j.__value="ro16",j.value=j.__value,q.__value="qf",q.value=q.__value,E.__value="sf",E.value=E.__value,L.__value="f",L.value=L.__value,void 0===e[2]&&c((()=>e[8].call(S))),$.__value=6,$.value=$.__value,w.__value=8,w.value=w.__value,void 0===e[3]&&c((()=>e[9].call(T))),a(n,"class","column svelte-100dra1"),a(W,"class","column svelte-100dra1"),a(t,"class","svelte-100dra1")},m(r,l){o(r,t,l),u(t,n),u(n,m),u(n,g),u(n,_),u(n,b),u(n,O),u(n,C),u(n,x),u(n,z),u(n,S),u(S,k),u(S,N),u(S,j),u(S,q),u(S,E),u(S,L),p(S,e[2]),u(n,M),u(n,I),u(n,J),u(n,T),u(T,$),u(T,w),p(T,e[3]),u(n,A),u(n,F),u(F,P),u(F,R),u(t,U),u(t,W),u(W,B),u(B,G),u(W,H),me&&me.m(W,null),u(W,K),u(W,Q),u(Q,V),u(W,D),u(W,X),u(W,Y),u(Y,Z),u(W,ee),u(W,te),u(W,ne),u(ne,re),u(W,oe),u(W,le),u(W,se),u(se,ie),ae||(ce=[f(O,"input",e[6]),f(S,"change",e[8]),f(S,"change",e[7]),f(T,"change",e[9]),f(T,"change",e[7])],ae=!0)},p(e,[t]){4&t&&p(S,e[2]),8&t&&p(T,e[3]),1&t&&ue!==(ue=JSON.stringify(e[0],null,2)+"")&&d(R,ue),6&t&&pe!==(pe=e[1].map(e[10]).join("\n")+"")&&d(G,pe),e[4]?me||(me=h(),me.c(),me.m(W,K)):me&&(me.d(1),me=null),4&t&&fe!==(fe=e[2].toUpperCase()+"")&&d(V,fe),2&t&&de!==(de=e[5](e[1],"price")+"")&&d(Z,de),6&t&&ve!==(ve=e[5](e[1].slice(0,6),e[2])+"")&&d(re,ve),6&t&&ye!==(ye=e[5](e[1],e[2])+"")&&d(ie,ye)},i:v,o:v,d(e){e&&l(t),me&&me.d(),ae=!1,y(ce)}}}function _(e,t,n){const r=localStorage.getItem("players");let o=r?JSON.parse(r):[],l=[];const s=(e,t)=>e.reduce(((e,n)=>e+n[t]),0),i=e=>e[a]/e.price;let a="total",c=6,u=!1;const p=()=>{if(!o.length)return;const e=o.sort(((e,t)=>t.price-e.price));n(0,o=o.sort(((e,t)=>t[a]-e[a]))),n(1,l=o.slice(0,c));let t=c,r=!1;const p=l.reduce(((e,t)=>{var n;return(!e[t.country]||i(t)>i(e[t.country]))&&(!r||(null===(n=e[t.country])||void 0===n?void 0:n.price)>=13.5||t.price<13.5)&&(e[t.country]=t,r||(r=t.price>=13.5)),e}),{});for(n(1,l=Object.values(p));l.length<c;){const e=o[t];!(e.price<13.5)&&r||p[e.country]||(r||(r=e.price>=13.5),p[e.country]=e,l.push(e)),++t}const f=[];let d=e.length-1;for(;f.length<8-c;)p[e[d].country]||"TW"==e[d].country||(f.push(e[d]),p[e[d].country]=e[d]),--d;for(;s(l.concat(f),"price")>80;){for(;s(l.concat(f),"price")+e[e.length-1].price>80;){let e=1/0,t=null;l.forEach(((n,r)=>{const o=i(n);o<e&&(e=o,t=r)})),delete p[l[t].country];const[n]=l.splice(t,1);r=r&&n.price<13.5}for(;l.length<c;){const e=o[t];if(t>=o.length)break;!(e.price<13.5)&&r||p[e.country]||(r||(r=e.price>=13.5),p[e.country]=e,l.push(e)),++t}if(t>=o.length){n(4,u=!0);break}}l.push(...f)};p();return[o,l,a,c,u,s,e=>{const t=[];e.target.value.split("\n").forEach((e=>{const[,,n,r,o,l,s,i,a,c,u,p]=e.split("\t");+l&&t.push({player:n,sel:+r,country:o,price:+l,ro32:+s,ro16:+i,qf:+a,sf:+c,f:+u,total:+p})})),n(0,o=t),localStorage.setItem("players",JSON.stringify(o)),p()},p,function(){a=m(this),n(2,a)},function(){c=m(this),n(3,c)},e=>`${e.player.padEnd(15)} (${e.country}, ${e.price.toFixed(1)}): ${e[a]}`]}new class extends e{constructor(e){super(),t(this,e,_,g,n,{})}}({target:document.getElementById("app")});
